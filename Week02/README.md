学习笔记

## 一. 问题
我们在数据库操作的时候，比如 dao 层中当遇到一个 sql.ErrNoRows 的时候，是否应该 Wrap 这个 error，抛给上层。为什么？应该怎么做请写出代码

## 二.回答
1. 一般来说，DAO也算是一个公司的基础服务，更多的是实现数据库操作的封装等；
2. 单纯一个sql.ErrNoRows 不同的业务需求可以解释为不同的含义，DAO自己无法知道调用他的上层在看到这个ERROR后，进一步的语义是什么；
3. 因此应该直接将原始的error返回给上层，由上层根据自己业务上下文进行Wrap该error信息

-----

## 相关心得

1. 底层服务、基础服务，尽量返回原始错误，不要使用wrap进行包装；
2. 上层服务使用Wrap进行错误的包装，然后其他服务可以使用Is、As进行递归的错误判断；
3. 写代码时，需要使用正确的API，减少`if err!=nil` 的写法;
4. 写代码时，通过接口的封装（http fmt.Fprintf 封装Write接口），使得主体代码编写顺序，错误处理通过接口实现的方式进行隐藏；

